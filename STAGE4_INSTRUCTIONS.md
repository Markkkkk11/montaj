# üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É –≠—Ç–∞–ø–∞ 4: –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è

## ‚úÖ –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### Backend
- ‚úÖ –ú–æ–¥–µ–ª—å `Payment` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ `Transaction` –∏ `Subscription`
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ÆKassa API (—Å mock-—Ä–µ–∂–∏–º–æ–º)
- ‚úÖ PaymentService - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ SubscriptionService - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- ‚úÖ 8 API endpoints –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ 5 API endpoints –¥–ª—è –ø–æ–¥–ø–∏—Å–æ–∫
- ‚úÖ Webhook –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç –ÆKassa
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–∫–ª–∏–∫–æ–≤ —Å —Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–∏—Å—Å–∏–π

### Frontend
- ‚úÖ API –∫–ª–∏–µ–Ω—Ç—ã –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π –∏ –ø–æ–¥–ø–∏—Å–æ–∫
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–æ—Ä–º—ã –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å—Ç–æ—Ä–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–∞—Ä–∏—Ñ–∞
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–µ–∫—É—â–µ–π –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/profile/balance`
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/profile/subscription`

### –¢–µ—Å—Ç—ã
- ‚úÖ 15+ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø–ª–∞—Ç—ë–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –¢–µ—Å—Ç—ã —Ç–∞—Ä–∏—Ñ–æ–≤ –∏ –ø–æ–¥–ø–∏—Å–æ–∫
- ‚úÖ –¢–µ—Å—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## üöÄ –ó–∞–ø—É—Å–∫

### –®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
cd /home/mark/Documents/montaj/backend

# –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
npx prisma migrate dev --name add_payment_system

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Prisma Client
npx prisma generate
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ —É –≤–∞—Å Prisma 7, –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é. –ü–æ–∫–∞ –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤ mock-—Ä–µ–∂–∏–º–µ.

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `backend/.env` (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —Å–æ–∑–¥–∞–Ω):

```env
# –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ...
NODE_ENV=development
PORT=5000
DATABASE_URL=postgresql://postgres:password@localhost:5432/montaj
REDIS_URL=redis://localhost:6379
JWT_SECRET=your-super-secret-jwt-key
JWT_EXPIRES_IN=7d
FRONTEND_URL=http://localhost:3000

# –ÆKassa (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º–∏ –¥–ª—è mock-—Ä–µ–∂–∏–º–∞)
YOOKASSA_SHOP_ID=
YOOKASSA_SECRET_KEY=

# SMSC (–¥–ª—è SMS)
SMSC_LOGIN=
SMSC_PASSWORD=
SMSC_SENDER=
```

**Mock —Ä–µ–∂–∏–º:** –ï—Å–ª–∏ `YOOKASSA_SHOP_ID` –∏ `YOOKASSA_SECRET_KEY` –ø—É—Å—Ç—ã–µ, —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π.

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã

```bash
cd /home/mark/Documents/montaj

# –í—Å–µ —Ç–µ—Å—Ç—ã
./test-system.sh

# –¢–æ–ª—å–∫–æ –ø–ª–∞—Ç–µ–∂–∏
cd backend
npm test -- payment.test.ts
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
cd /home/mark/Documents/montaj

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Docker (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –∑–∞–ø—É—â–µ–Ω)
docker-compose up -d

# –ó–∞–ø—É—Å—Ç–∏—Ç—å backend –∏ frontend
npm run dev
```

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∞–ª–∞–Ω—Å–∞

1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ—Ñ–∏–ª—å ‚Üí –ë–∞–ª–∞–Ω—Å
3. –í—ã —É–≤–∏–¥–∏—Ç–µ:
   - –û—Å–Ω–æ–≤–Ω–æ–π –±–∞–ª–∞–Ω—Å (–µ—Å–ª–∏ –ø–æ–ø–æ–ª–Ω—è–ª–∏)
   - –ë–æ–Ω—É—Å–Ω—ã–π –±–∞–ª–∞–Ω—Å (1000‚ÇΩ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
   - –û–±—â–∏–π –±–∞–ª–∞–Ω—Å

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–∞–ª–∞–Ω—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞

1. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/profile/balance`
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É "–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ"
3. –í—ã–±–µ—Ä–∏—Ç–µ —Å—É–º–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1000‚ÇΩ) –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ—é
4. –ù–∞–∂–º–∏—Ç–µ "–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ"
5. –í—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã

**Mock —Ä–µ–∂–∏–º:** URL –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å `mock=true`

**–†–µ–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º:** –í—ã –ø–æ–ø–∞–¥—ë—Ç–µ –Ω–∞ —Ñ–æ—Ä–º—É –ÆKassa

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–ª–∞—Ç—ë–∂ —Å–æ–∑–¥–∞–Ω, URL –¥–ª—è –æ–ø–ª–∞—Ç—ã –ø–æ–ª—É—á–µ–Ω

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–ò—Å—Ç–æ—Ä–∏—è"
2. –í—ã —É–≤–∏–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–µ–π —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–ª–∞—Ç–µ–∂–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–∞—Ä–∏—Ñ–æ–≤

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ—Ñ–∏–ª—å ‚Üí –ü–æ–¥–ø–∏—Å–∫–∞
2. –í—ã —É–≤–∏–¥–∏—Ç–µ:
   - –¢–µ–∫—É—â—É—é –ø–æ–¥–ø–∏—Å–∫—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é PREMIUM –Ω–∞ –º–µ—Å—è—Ü)
   - –¢—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–∞—Ä–∏—Ñ–æ–≤

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∞—Ä–∏—Ñ–∞—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

### –°—Ü–µ–Ω–∞—Ä–∏–π 5: –°–º–µ–Ω–∞ —Ç–∞—Ä–∏—Ñ–∞

**–ù–∞ Standard –∏–ª–∏ Comfort (–±–µ—Å–ø–ª–∞—Ç–Ω–æ):**
1. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ Standard –∏–ª–∏ Comfort
2. –ù–∞–∂–º–∏—Ç–µ "–í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ"
3. –¢–∞—Ä–∏—Ñ –∏–∑–º–µ–Ω–∏—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ

**–ù–∞ Premium (–ø–ª–∞—Ç–Ω–æ):**
1. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ Premium
2. –ù–∞–∂–º–∏—Ç–µ "–í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ"
3. –í—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –æ–ø–ª–∞—Ç—É 5000‚ÇΩ
4. –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã —Ç–∞—Ä–∏—Ñ –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ Premium –Ω–∞ 30 –¥–Ω–µ–π

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–∞—Ä–∏—Ñ –∏–∑–º–µ–Ω—ë–Ω, –ø–æ–¥–ø–∏—Å–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞

### –°—Ü–µ–Ω–∞—Ä–∏–π 6: –û—Ç–∫–ª–∏–∫ —Å —É—á—ë—Ç–æ–º —Ç–∞—Ä–∏—Ñ–∞

**Standard (150‚ÇΩ –∑–∞ –æ—Ç–∫–ª–∏–∫):**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —Ç–∞—Ä–∏—Ñ Standard
2. –ù–∞–π–¥–∏—Ç–µ –∑–∞–∫–∞–∑ –∏ –Ω–∞–∂–º–∏—Ç–µ "–û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è"
3. –° –±–∞–ª–∞–Ω—Å–∞ —Å–ø–∏—à–µ—Ç—Å—è 150‚ÇΩ

**Comfort (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –æ—Ç–∫–ª–∏–∫, 500‚ÇΩ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ):**
1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ Comfort
2. –û—Ç–∫–ª–∏–∫–Ω–∏—Ç–µ—Å—å –Ω–∞ –∑–∞–∫–∞–∑ - –±–µ—Å–ø–ª–∞—Ç–Ω–æ
3. –ï—Å–ª–∏ –∑–∞–∫–∞–∑—á–∏–∫ –≤—ã–±–µ—Ä–µ—Ç –≤–∞—Å - —Å–ø–∏—à–µ—Ç—Å—è 500‚ÇΩ

**Premium (–±–µ–∑–ª–∏–º–∏—Ç–Ω–æ):**
1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ Premium (–∏–ª–∏ –æ–ø–ª–∞—Ç–∏—Ç–µ)
2. –û—Ç–∫–ª–∏–∫–∞–π—Ç–µ—Å—å –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–º–∏—Å—Å–∏—è —Å–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ —Ç–∞—Ä–∏—Ñ—É

## üîß API Endpoints

### –ü–ª–∞—Ç–µ–∂–∏

```bash
# –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç—ë–∂ –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
curl -X POST http://localhost:5000/api/payments/top-up \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"amount": 1000}'

# –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–ª–∞—Ç–µ–∂–µ–π
curl http://localhost:5000/api/payments \
  -H "Authorization: Bearer YOUR_TOKEN"

# –ü–æ–ª—É—á–∏—Ç—å –ø–ª–∞—Ç—ë–∂ –ø–æ ID
curl http://localhost:5000/api/payments/PAYMENT_ID \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### –ü–æ–¥–ø–∏—Å–∫–∏

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ç–∞—Ä–∏—Ñ
curl http://localhost:5000/api/subscriptions/tariff \
  -H "Authorization: Bearer YOUR_TOKEN"

# –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Å–µ—Ö —Ç–∞—Ä–∏—Ñ–∞—Ö
curl http://localhost:5000/api/subscriptions/tariffs \
  -H "Authorization: Bearer YOUR_TOKEN"

# –°–º–µ–Ω–∏—Ç—å —Ç–∞—Ä–∏—Ñ –Ω–∞ Comfort
curl -X POST http://localhost:5000/api/subscriptions/change-tariff \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"tariffType": "COMFORT"}'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–ª–∏–∫–∞
curl http://localhost:5000/api/subscriptions/can-respond \
  -H "Authorization: Bearer YOUR_TOKEN"
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞—Ä–∏—Ñ–æ–≤

| –¢–∞—Ä–∏—Ñ | –°—Ç–æ–∏–º–æ—Å—Ç—å | –û—Ç–∫–ª–∏–∫ | –ü—Ä–∏ –≤—ã–±–æ—Ä–µ | –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π |
|-------|-----------|--------|------------|---------------|
| **Standard** | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ | 150‚ÇΩ | - | 1 |
| **Comfort** | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ | 0‚ÇΩ | 500‚ÇΩ | 1 |
| **Premium** | 5000‚ÇΩ/30 –¥–Ω–µ–π | 0‚ÇΩ | 0‚ÇΩ | 3 |

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** Prisma 7 —Ç—Ä–µ–±—É–µ—Ç –¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ:**
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ mock-—Ä–µ–∂–∏–º –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
# –ò–ª–∏ –æ—Ç–∫–∞—Ç–∏—Ç–µ—Å—å –Ω–∞ Prisma 6:
cd backend
npm install prisma@6 @prisma/client@6
```

**–†–µ—à–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–µ:** –û–±–Ω–æ–≤–∏—Ç—å `schema.prisma` –ø–æ–¥ Prisma 7

### –ë–∞–ª–∞–Ω—Å –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã

**–ü—Ä–∏—á–∏–Ω–∞:** Webhook –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–ª—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É `payments` –≤ –ë–î
3. –í—Ä—É—á–Ω—É—é –≤—ã–∑–æ–≤–∏—Ç–µ callback:
```bash
curl http://localhost:5000/api/payments/success/callback?payment_id=PAYMENT_ID
```

### –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç

**–ü—Ä–∏—á–∏–Ω–∞:** –ë–î –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞ –∏–ª–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
```bash
docker-compose up -d
cd backend
npx prisma migrate dev
npm test
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **STAGE4_COMPLETE.md** - –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —ç—Ç–∞–ø–∞
- **YOOKASSA_SETUP.md** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ÆKassa
- **SETUP.md** - –æ–±—â–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏:

1. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –ë–î
3. ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞—Ä–∏—Ñ—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –ÆKassa (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

**–ì–æ—Ç–æ–≤–æ –∫ –≠—Ç–∞–ø—É 5: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å!** üöÄ

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î
cd backend
npx prisma studio

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
psql -U postgres -d montaj -c "SELECT * FROM transactions ORDER BY created_at DESC LIMIT 10"

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–ª–∞—Ç–µ–∂–∏
psql -U postgres -d montaj -c "SELECT * FROM payments ORDER BY created_at DESC LIMIT 10"

# –°–±—Ä–æ—Å–∏—Ç—å –ë–î (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
cd backend
npx prisma migrate reset
```

